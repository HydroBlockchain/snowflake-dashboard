(window.webpackJsonp=window.webpackJsonp||[]).push([[10,29],{240:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a(0),o=a.n(n),s=a(5779),i=a(5780),c=a.n(i),l=a(27),u=a(9),d=a(101),m=Object(l.withTheme)()(function(e){var t=e.theme;return o.a.createElement(c.a,{size:t.typography.button.fontSize})});function p(e){var t=e.show,a=e.method,n=e.readyText,i=e.classes,c=e.onTransactionHash,l=e.onConfirmation,p=Object(u.useWeb3Context)(),g=Object(u.useTransactionManager)(a,{handlers:{transactionHash:c,receipt:l}}),f=Object(r.a)(g,4),h=f[0],y=f[1],b=f[2],v=f[3];switch(h){case"ready":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",onClick:b,className:i.ready},n);case"sending":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",disabled:!0,className:i.sendingPending},o.a.createElement(m,null));case"pending":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",className:i.sendingPending,component:"a",href:Object(d.getEtherscanLink)(p.networkId,"transaction",y.transactionHash),target:"_blank"},o.a.createElement("span",null,"Pending Confirmation ",o.a.createElement(m,null)));case"success":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",className:i.success,component:"a",href:Object(d.getEtherscanLink)(p.networkId,"transaction",y.transactionHash),target:"_blank"},o.a.createElement("span",null,"Success!"));case"error":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",onClick:v,className:i.error},o.a.createElement("span",null,"Error. Retry?"));default:throw Error("This should not happen\u2122.")}}p.defaultProps={show:!0,onTransactionHash:function(){},onConfirmation:function(){}},t.default=Object(l.withStyles)(function(e){return{ready:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.dark}},sendingPending:{backgroundColor:e.palette.grey[300],color:e.palette.getContrastText(e.palette.grey[300]),"&:hover":{backgroundColor:e.palette.grey[500]}},error:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText,"&:hover":{backgroundColor:e.palette.error.dark}},success:{backgroundColor:e.palette.success.main,color:e.palette.success.contrastText,"&:hover":{backgroundColor:e.palette.success.dark}}}})(p)},242:function(e,t,a){"use strict";var r=a(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),o=(0,r(a(49)).default)(n.default.createElement(n.default.Fragment,null,n.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),n.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Delete");t.default=o},247:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a(0),o=a.n(n),s=a(5779),i=a(5780),c=a.n(i),l=a(27),u=a(9),d=Object(l.withTheme)()(function(e){var t=e.theme;return o.a.createElement(c.a,{size:t.typography.button.fontSize})});function m(e){var t=e.show,a=e.message,n=e.readyText,i=e.classes,c=e.onSuccess,l=Object(u.useSignPersonalManager)(a,{handlers:{success:c}}),m=Object(r.a)(l,4),p=m[0],g=(m[1],m[2]),f=m[3];switch(p){case"ready":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",onClick:g,className:i.ready},n);case"pending":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",disabled:!0,className:i.sendingPending},o.a.createElement(d,null));case"success":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",className:i.success},o.a.createElement("span",null,"Success!"));case"error":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",onClick:f,className:i.error},o.a.createElement("span",null,"Error. Retry?"));default:throw Error("This should not happen\u2122.")}}m.defaultProps={show:!0,onSuccess:function(){}},t.default=Object(l.withStyles)(function(e){return{ready:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.dark}},sendingPending:{backgroundColor:e.palette.grey[300],color:e.palette.getContrastText(e.palette.grey[300]),"&:hover":{backgroundColor:e.palette.grey[500]}},error:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText,"&:hover":{backgroundColor:e.palette.error.dark}},success:{backgroundColor:e.palette.success.main,color:e.palette.success.contrastText,"&:hover":{backgroundColor:e.palette.success.dark}}}})(m)},256:function(e,t,a){"use strict";var r=a(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),o=(0,r(a(49)).default)(n.default.createElement(n.default.Fragment,null,n.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.default.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"})),"FileCopy");t.default=o},5994:function(e,t,a){"use strict";var r=a(129);t.a=r.a},60:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(1),s=a.n(o),i=a(19),c=a.n(i),l=a(53),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var m=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},p=function(e){function t(){var a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];return a=r=d(this,e.call.apply(e,[this].concat(o))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!m(e)){e.preventDefault();var t=r.context.router.history,a=r.props,n=a.replace,o=a.to;n?t.replace(o):t.push(o)}},d(r,a)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),a=e.innerRef,r=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["replace","to","innerRef"]);c()(this.context.router,"You should not use <Link> outside a <Router>"),c()(void 0!==t,'You must specify the "to" property');var o=this.context.router.history,s="string"===typeof t?Object(l.b)(t,null,null,o.location):t,i=o.createHref(s);return n.a.createElement("a",u({},r,{onClick:this.handleClick,href:i,ref:a}))},t}(n.a.Component);p.propTypes={onClick:s.a.func,target:s.a.string,replace:s.a.bool,to:s.a.oneOfType([s.a.string,s.a.object]).isRequired,innerRef:s.a.oneOfType([s.a.string,s.a.func])},p.defaultProps={replace:!1},p.contextTypes={router:s.a.shape({history:s.a.shape({push:s.a.func.isRequired,replace:s.a.func.isRequired,createHref:s.a.func.isRequired}).isRequired}).isRequired},t.a=p},91:function(e,t,a){"use strict";a.r(t);var r=a(131),n=a(16),o=a(0),s=a.n(o),i=a(5995),c=a(27),l=a(101),u=a(9),d=a(5994),m=a(60),p=a(5779),g=a(264),f=a(5795),h=a.n(f),y=a(5796),b=a.n(y),v=a(5797),E=a.n(v),k=a(5798),C=a.n(k),w=a(242),O=a.n(w),j=a(256),A=a.n(j),x=a(21),I=a(240),T=a(247),N=a(72);function P(e){var t=e.ein,a=e.setCurrentClaim,r=Object(u.useWeb3Context)(),i=Object(x.useNamedContract)("1484"),c=Object(o.useState)(""),l=Object(n.a)(c,2),d=l[0],m=l[1],f=Object(o.useState)(void 0),y=Object(n.a)(f,2),v=y[0],k=y[1];Object(u.useAccountEffect)(function(){""!==d?Object(g.isValidChecksumAddress)(d)?i.methods.hasIdentity(d).call().then(function(e){k(e?"Address is already associated with an Identity.":null)}):k("Invalid address."):k(void 0)},[d]);var w=Object(o.useState)(0),O=Object(n.a)(w,2),j=O[0],A=O[1];var I=Object(o.useRef)(Math.round(new Date/1e3)-120),N=null!==v?null:r.web3js.utils.soliditySha3("0x19","0x00",i._address,"I authorize adding this address to my Identity.",t,d,I.current);return s.a.createElement(s.a.Fragment,null,s.a.createElement(p.y,{variant:"h4",gutterBottom:!0,color:"textPrimary"},"Link a new address to your EIN."),s.a.createElement(h.a,{activeStep:j,orientation:"vertical"},s.a.createElement(b.a,{key:0},s.a.createElement(E.a,null,0===j?"Address to Add":"Address to Add: ".concat(d)),s.a.createElement(C.a,null,"Enter the address you wish to claim under your current identity. You need to be able to transact from this address.",s.a.createElement(p.w,{key:"Address to Add",label:"Address to Add",helperText:v||"You will need to transact from this address.",error:!!v,required:!0,margin:"normal",value:d,onChange:function(e){return m(e.target.value)},fullWidth:!0}),s.a.createElement(p.a,{variant:"contained",disabled:""===d||null!==v,onClick:function(){A(j+1)}},"Next"))),s.a.createElement(b.a,{key:1},s.a.createElement(E.a,null,"Give Permission"),s.a.createElement(C.a,null,"The next step is for you to give us permission to link this address to your Identity. This requires your signature of a hashed permission string.",s.a.createElement("br",null),s.a.createElement(p.a,{variant:"contained",style:{marginRight:"15px"},onClick:function(){A(j-1)}},"Back"),s.a.createElement(T.default,{readyText:"Sign",message:N,onSuccess:function(e){a({targetAddress:d,targetIsApproving:0,signingAddress:r.account,signature:e,timestamp:I.current})}})))))}var S=Object(c.withStyles)(function(e){return{snackbar:{maxWidth:"45%"},warning:{backgroundColor:e.palette.error.main},rightIcon:{marginLeft:e.spacing.unit},white:{color:"white"}}})(function(e){var t,a,r,n,o,i,c,d,m,f,h=e.classes,y=e.location,b=e.claim,v=e.deleteCurrentClaim,E=e.setRedirect,k=Object(u.useWeb3Context)(),C=Object(x.useNamedContract)("1484"),w=Object(x.useEIN)(b.targetIsApproving?b.targetAddress:b.signingAddress);return w?k.account===b.targetAddress?s.a.createElement(s.a.Fragment,null,s.a.createElement(p.y,{gutterBottom:!0,color:"textPrimary"},"Finalize the link between this address (",s.a.createElement("a",{href:Object(l.getEtherscanLink)(k.networkId,"address",k.account),className:h.link,target:"_blank",rel:"noopener noreferrer"},k.account),") and your EIN (",w,")."),s.a.createElement(I.default,{readyText:"Finalize",method:function(){return C.methods.addAssociatedAddress(b.targetIsApproving?b.targetAddress:b.signingAddress,b.targetIsApproving?b.signingAddress:b.targetAddress,b.signature.v,b.signature.r,b.signature.s,b.timestamp)},onConfirmation:function(){E(!0),v(),k.reRenderers.forceAccountReRender()}})):s.a.createElement(s.a.Fragment,null,s.a.createElement(p.y,{gutterBottom:!0,color:"textPrimary"},"Claim detected! Please switch to"," ",s.a.createElement("a",{href:Object(l.getEtherscanLink)(k.networkId,"address",b.targetAddress),className:h.link,target:"_blank",rel:"noopener noreferrer"},b.targetAddress)," ","to finalize your claim."),s.a.createElement(p.y,{gutterBottom:!0,color:"textPrimary"},"If that account is only available on another devices, you may finalize the claim by visiting this URL:"),s.a.createElement(N.default,{key:"copy",placement:"top",value:(t=b,a=t.targetAddress,r=t.targetIsApproving,n=t.signingAddress,o=t.signature,i=t.timestamp,c=o.v,d=o.r,m=o.s,f=Object(g.toRpcSig)(c,d,m),[window.location.origin,"/snowflake-dashboard",y.pathname,"/".concat(a,"/").concat(Number(r),"/").concat(n,"/").concat(f,"/").concat(i)].join(""))},s.a.createElement(p.a,null,"Copy Link",s.a.createElement(A.a,{className:h.rightIcon}))),s.a.createElement(p.y,{gutterBottom:!0,color:"textPrimary"},"You may also delete this claim if you no longer wish to link your address:"),s.a.createElement(p.a,{onClick:v},"Delete Claim",s.a.createElement(O.a,{className:h.rightIcon}))):null});t.default=Object(i.a)(function(e){var t=e.ein,a=e.location,i=e.history,c=Object(u.useWeb3Context)(),l=Object(x.useSessionStorageState)(null,"SnowflakeClaim|".concat(c.networkId)),f=Object(n.a)(l,3),h=f[0],y=f[1],b=f[2],v=Object(o.useState)(!1),E=Object(n.a)(v,2),k=E[0],C=E[1];return Object(o.useEffect)(function(){if(a.state)try{if(!Object(g.isValidChecksumAddress)(a.state.targetAddress))throw Error("Invalid target address.");if(![0,1].includes(Number(a.state.targetIsApproving)))throw Error("Invalid targetIsApproving flag.");if(!Object(g.isValidChecksumAddress)(a.state.signingAddress))throw Error("Invalid signing address.");if(!Number.isInteger(Number(a.state.timestamp)))throw Error("Invalid timestamp.");var e=Math.round(Date.now()/1e3);if(Number(a.state.timestamp)<e-82080)throw Error("Timestamp too old.");if(Number(a.state.timestamp)>e)throw Error("Timestamp in the future.");y({targetAddress:a.state.targetAddress,targetIsApproving:!!Number(a.state.targetIsApproving),signingAddress:a.state.signingAddress,signature:Object(g.fromRpcSig)(a.state.signature),timestamp:Number(a.state.timestamp)})}catch(t){console.error("Error parsing arguments passed in the URL.",t)}finally{i.replace(Object(r.a)({},a,{state:void 0}))}},[]),k?s.a.createElement(d.a,{to:"/"}):s.a.createElement(s.a.Fragment,null,!t&&!h&&s.a.createElement(s.a.Fragment,null,s.a.createElement(p.y,{gutterBottom:!0,color:"textPrimary"},"If you are trying to link your current account to an existing identity, you need a signature! Visit your existing Provider to get one."),s.a.createElement(p.a,{component:m.a,to:"/"},"Creating a new Identity?")),t&&!h&&s.a.createElement(P,{ein:t,setCurrentClaim:y,deleteCurrentClaim:b}),h&&s.a.createElement(S,{claim:h,location:a,deleteCurrentClaim:b,setRedirect:C}))})}}]);
//# sourceMappingURL=10.620a51d6.chunk.js.map