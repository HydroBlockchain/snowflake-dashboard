(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{102:function(e,t,a){"use strict";a.r(t);var r=a(127),n=a(16),o=a(0),s=a.n(o),i=a(5957),c=a(26),l=a(97),d=a(7),u=a(5956),m=a(36),g=a(5744),p=a(250),h=a(5757),y=a.n(h),f=a(5758),b=a.n(f),v=a(5759),E=a.n(v),k=a(5760),C=a.n(k),w=a(228),A=a.n(w),O=a(242),j=a.n(O),I=a(17),x=a(226),N=a(233),S=a(68);function T(e){var t=e.ein,a=e.setCurrentClaim,r=Object(d.useWeb3Context)(),i=Object(I.useNamedContract)("1484"),c=Object(o.useState)(""),l=Object(n.a)(c,2),u=l[0],m=l[1],h=Object(o.useState)(void 0),f=Object(n.a)(h,2),v=f[0],k=f[1];Object(d.useAccountEffect)(function(){""!==u?Object(p.isValidChecksumAddress)(u)?i.methods.hasIdentity(u).call().then(function(e){k(e?"Address is already associated with an Identity.":null)}):k("Invalid address."):k(void 0)},[u]);var w=Object(o.useState)(0),A=Object(n.a)(w,2),O=A[0],j=A[1];var x=Object(o.useRef)(Math.round(new Date/1e3)-120),S=null!==v?null:r.library.utils.soliditySha3("0x19","0x00",i._address,"I authorize adding this address to my Identity.",t,u,x.current);return s.a.createElement(s.a.Fragment,null,s.a.createElement(g.y,{variant:"h4",gutterBottom:!0,color:"textPrimary"},"Link a new address to your EIN."),s.a.createElement(y.a,{activeStep:O,orientation:"vertical"},s.a.createElement(b.a,{key:0},s.a.createElement(E.a,null,0===O?"Address to Add":"Address to Add: ".concat(u)),s.a.createElement(C.a,null,"Enter the address you wish to claim under your current identity. You need to be able to transact from this address.",s.a.createElement(g.w,{key:"Address to Add",label:"Address to Add",helperText:v||"You will need to transact from this address.",error:!!v,required:!0,margin:"normal",value:u,onChange:function(e){return m(e.target.value)},fullWidth:!0}),s.a.createElement(g.a,{variant:"contained",disabled:""===u||null!==v,onClick:function(){j(O+1)}},"Next"))),s.a.createElement(b.a,{key:1},s.a.createElement(E.a,null,"Give Permission"),s.a.createElement(C.a,null,"The next step is for you to give us permission to link this address to your Identity. This requires your signature of a hashed permission string.",s.a.createElement("br",null),s.a.createElement(g.a,{variant:"contained",style:{marginRight:"15px"},onClick:function(){j(O-1)}},"Back"),s.a.createElement(N.default,{readyText:"Sign",message:S,onSuccess:function(e){a({targetAddress:u,targetIsApproving:0,signingAddress:r.account,signature:e,timestamp:x.current})}})))))}var P=Object(c.withStyles)(function(e){return{snackbar:{maxWidth:"45%"},warning:{backgroundColor:e.palette.error.main},rightIcon:{marginLeft:e.spacing.unit},white:{color:"white"}}})(function(e){var t=e.classes,a=e.location,r=e.claim,n=e.deleteCurrentClaim,o=e.setRedirect,i=Object(d.useWeb3Context)(),c=Object(I.useNamedContract)("1484"),u=Object(I.useEIN)(r.targetIsApproving?r.targetAddress:r.signingAddress);return u?i.account.toLowerCase()===r.targetAddress.toLowerCase()?s.a.createElement(s.a.Fragment,null,s.a.createElement(g.y,{gutterBottom:!0,color:"textPrimary"},"Finalize the link between this address (",s.a.createElement("a",{href:Object(l.getEtherscanLink)(i.networkId,"address",i.account),className:t.link,target:"_blank",rel:"noopener noreferrer"},i.account),") and your EIN (",u,")."),s.a.createElement(x.default,{readyText:"Finalize",method:function(){return c.methods.addAssociatedAddress(r.targetIsApproving?r.targetAddress:r.signingAddress,r.targetIsApproving?r.signingAddress:r.targetAddress,r.signature.v,r.signature.r,r.signature.s,r.timestamp)},onConfirmation:function(){o(!0),n(),i.forceAccountReRender()}})):s.a.createElement(s.a.Fragment,null,s.a.createElement(g.y,{gutterBottom:!0,color:"textPrimary"},"Claim detected! Please switch to"," ",s.a.createElement("a",{href:Object(l.getEtherscanLink)(i.networkId,"address",r.targetAddress),className:t.link,target:"_blank",rel:"noopener noreferrer"},r.targetAddress)," ","to finalize your claim."),s.a.createElement(g.y,{gutterBottom:!0,color:"textPrimary"},"If that account is only available on another devices, you may finalize the claim by visiting this URL:"),s.a.createElement(S.default,{key:"copy",placement:"top",value:function(e){var t=e.targetAddress,r=e.targetIsApproving,n=e.signingAddress,o=e.signature,s=e.timestamp,i=o.v,c=o.r,l=o.s,d=Object(p.toRpcSig)(i,c,l);return[window.location.origin,"/snowflake-dashboard",a.pathname,"/".concat(t,"/").concat(Number(r),"/").concat(n,"/").concat(d,"/").concat(s)].join("")}(r)},s.a.createElement(g.a,null,"Copy Link",s.a.createElement(j.a,{className:t.rightIcon}))),s.a.createElement(g.y,{gutterBottom:!0,color:"textPrimary"},"You may also delete this claim if you no longer wish to link your address:"),s.a.createElement(g.a,{onClick:n},"Delete Claim",s.a.createElement(A.a,{className:t.rightIcon}))):null});t.default=Object(i.a)(function(e){var t=e.ein,a=e.location,i=e.history,c=Object(d.useWeb3Context)(),l=Object(I.useSessionStorageState)(null,"SnowflakeClaim|".concat(c.networkId)),h=Object(n.a)(l,3),y=h[0],f=h[1],b=h[2],v=Object(o.useState)(!1),E=Object(n.a)(v,2),k=E[0],C=E[1];return Object(o.useEffect)(function(){if(a.state)try{if(!Object(p.isValidChecksumAddress)(a.state.targetAddress))throw Error("Invalid target address.");if(![0,1].includes(Number(a.state.targetIsApproving)))throw Error("Invalid targetIsApproving flag.");if(!Object(p.isValidChecksumAddress)(a.state.signingAddress))throw Error("Invalid signing address.");if(!Number.isInteger(Number(a.state.timestamp)))throw Error("Invalid timestamp.");var e=Math.round(Date.now()/1e3);if(Number(a.state.timestamp)<e-82080)throw Error("Timestamp too old.");if(Number(a.state.timestamp)>e)throw Error("Timestamp in the future.");f({targetAddress:a.state.targetAddress,targetIsApproving:!!Number(a.state.targetIsApproving),signingAddress:a.state.signingAddress,signature:Object(p.fromRpcSig)(a.state.signature),timestamp:Number(a.state.timestamp)})}catch(t){console.error("Error parsing arguments passed in the URL.",t)}finally{i.replace(Object(r.a)({},a,{state:void 0}))}},[]),k?s.a.createElement(u.a,{to:"/"}):s.a.createElement(s.a.Fragment,null,!t&&!y&&s.a.createElement(s.a.Fragment,null,s.a.createElement(g.y,{gutterBottom:!0,color:"textPrimary"},"If you are trying to link your current account to an existing identity, you need a signature! Visit your existing Provider to get one."),s.a.createElement(g.a,{component:m.a,to:"/"},"Creating a new Identity?")),t&&!y&&s.a.createElement(T,{ein:t,setCurrentClaim:f,deleteCurrentClaim:b}),y&&s.a.createElement(P,{claim:y,location:a,deleteCurrentClaim:b,setRedirect:C}))})},226:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a(0),o=a.n(n),s=a(5744),i=a(5745),c=a.n(i),l=a(26),d=a(7),u=a(97),m=Object(l.withTheme)()(function(e){var t=e.theme;return o.a.createElement(c.a,{size:t.typography.button.fontSize})});function g(e){var t=e.show,a=e.method,n=e.readyText,i=e.classes,c=e.onTransactionHash,l=e.onConfirmation,g=e.transactionOptions,p=Object(d.useWeb3Context)(),h=Object(d.useTransactionManager)(a,{handlers:{transactionHash:c,receipt:l},transactionOptions:g}),y=Object(r.a)(h,4),f=y[0],b=y[1],v=y[2],E=y[3];switch(f){case"ready":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",onClick:v,className:i.ready},n);case"sending":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",disabled:!0,className:i.sendingPending},o.a.createElement(m,null));case"pending":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",className:i.sendingPending,component:"a",href:Object(u.getEtherscanLink)(p.networkId,"transaction",b.transactionHash),target:"_blank"},o.a.createElement("span",null,"Pending Confirmation ",o.a.createElement(m,null)));case"success":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",className:i.success,component:"a",href:Object(u.getEtherscanLink)(p.networkId,"transaction",b.transactionHash),target:"_blank"},o.a.createElement("span",null,"Success!"));case"error":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",onClick:E,className:i.error},o.a.createElement("span",null,"Error. Retry?"));default:throw Error("This should not happen\u2122.")}}g.defaultProps={show:!0,onTransactionHash:function(){},onConfirmation:function(){}},t.default=Object(l.withStyles)(function(e){return{ready:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.dark}},sendingPending:{backgroundColor:e.palette.grey[300],color:e.palette.getContrastText(e.palette.grey[300]),"&:hover":{backgroundColor:e.palette.grey[500]}},error:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText,"&:hover":{backgroundColor:e.palette.error.dark}},success:{backgroundColor:e.palette.success.main,color:e.palette.success.contrastText,"&:hover":{backgroundColor:e.palette.success.dark}}}})(g)},228:function(e,t,a){"use strict";var r=a(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),o=(0,r(a(50)).default)(n.default.createElement(n.default.Fragment,null,n.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),n.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Delete");t.default=o},233:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a(0),o=a.n(n),s=a(5744),i=a(5745),c=a.n(i),l=a(26),d=a(7),u=Object(l.withTheme)()(function(e){var t=e.theme;return o.a.createElement(c.a,{size:t.typography.button.fontSize})});function m(e){var t=e.show,a=e.message,n=e.readyText,i=e.classes,c=e.onSuccess,l=Object(d.useSignPersonalManager)(a,{handlers:{success:c}}),m=Object(r.a)(l,4),g=m[0],p=(m[1],m[2]),h=m[3];switch(g){case"ready":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",onClick:p,className:i.ready},n);case"pending":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",disabled:!0,className:i.sendingPending},o.a.createElement(u,null));case"success":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",className:i.success},o.a.createElement("span",null,"Success!"));case"error":return o.a.createElement(s.a,{style:t?void 0:{display:"none"},variant:"contained",onClick:h,className:i.error},o.a.createElement("span",null,"Error. Retry?"));default:throw Error("This should not happen\u2122.")}}m.defaultProps={show:!0,onSuccess:function(){}},t.default=Object(l.withStyles)(function(e){return{ready:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.dark}},sendingPending:{backgroundColor:e.palette.grey[300],color:e.palette.getContrastText(e.palette.grey[300]),"&:hover":{backgroundColor:e.palette.grey[500]}},error:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText,"&:hover":{backgroundColor:e.palette.error.dark}},success:{backgroundColor:e.palette.success.main,color:e.palette.success.contrastText,"&:hover":{backgroundColor:e.palette.success.dark}}}})(m)},242:function(e,t,a){"use strict";var r=a(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),o=(0,r(a(50)).default)(n.default.createElement(n.default.Fragment,null,n.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.default.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"})),"FileCopy");t.default=o}}]);
//# sourceMappingURL=24.9b1683b8.chunk.js.map