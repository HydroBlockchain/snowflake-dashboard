(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{240:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a(0),s=a.n(n),o=a(5779),i=a(5780),c=a.n(i),l=a(27),d=a(9),u=a(101),m=Object(l.withTheme)()(function(e){var t=e.theme;return s.a.createElement(c.a,{size:t.typography.button.fontSize})});function g(e){var t=e.show,a=e.method,n=e.readyText,i=e.classes,c=e.onTransactionHash,l=e.onConfirmation,g=Object(d.useWeb3Context)(),p=Object(d.useTransactionManager)(a,{handlers:{transactionHash:c,receipt:l}}),h=Object(r.a)(p,4),y=h[0],f=h[1],b=h[2],v=h[3];switch(y){case"ready":return s.a.createElement(o.a,{style:t?void 0:{display:"none"},variant:"contained",onClick:b,className:i.ready},n);case"sending":return s.a.createElement(o.a,{style:t?void 0:{display:"none"},variant:"contained",disabled:!0,className:i.sendingPending},s.a.createElement(m,null));case"pending":return s.a.createElement(o.a,{style:t?void 0:{display:"none"},variant:"contained",className:i.sendingPending,component:"a",href:Object(u.getEtherscanLink)(g.networkId,"transaction",f.transactionHash),target:"_blank"},s.a.createElement("span",null,"Pending Confirmation ",s.a.createElement(m,null)));case"success":return s.a.createElement(o.a,{style:t?void 0:{display:"none"},variant:"contained",className:i.success,component:"a",href:Object(u.getEtherscanLink)(g.networkId,"transaction",f.transactionHash),target:"_blank"},s.a.createElement("span",null,"Success!"));case"error":return s.a.createElement(o.a,{style:t?void 0:{display:"none"},variant:"contained",onClick:v,className:i.error},s.a.createElement("span",null,"Error. Retry?"));default:throw Error("This should not happen\u2122.")}}g.defaultProps={show:!0,onTransactionHash:function(){},onConfirmation:function(){}},t.default=Object(l.withStyles)(function(e){return{ready:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.dark}},sendingPending:{backgroundColor:e.palette.grey[300],color:e.palette.getContrastText(e.palette.grey[300]),"&:hover":{backgroundColor:e.palette.grey[500]}},error:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText,"&:hover":{backgroundColor:e.palette.error.dark}},success:{backgroundColor:e.palette.success.main,color:e.palette.success.contrastText,"&:hover":{backgroundColor:e.palette.success.dark}}}})(g)},242:function(e,t,a){"use strict";var r=a(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),s=(0,r(a(49)).default)(n.default.createElement(n.default.Fragment,null,n.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),n.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Delete");t.default=s},247:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a(0),s=a.n(n),o=a(5779),i=a(5780),c=a.n(i),l=a(27),d=a(9),u=Object(l.withTheme)()(function(e){var t=e.theme;return s.a.createElement(c.a,{size:t.typography.button.fontSize})});function m(e){var t=e.show,a=e.message,n=e.readyText,i=e.classes,c=e.onSuccess,l=Object(d.useSignPersonalManager)(a,{handlers:{success:c}}),m=Object(r.a)(l,4),g=m[0],p=(m[1],m[2]),h=m[3];switch(g){case"ready":return s.a.createElement(o.a,{style:t?void 0:{display:"none"},variant:"contained",onClick:p,className:i.ready},n);case"pending":return s.a.createElement(o.a,{style:t?void 0:{display:"none"},variant:"contained",disabled:!0,className:i.sendingPending},s.a.createElement(u,null));case"success":return s.a.createElement(o.a,{style:t?void 0:{display:"none"},variant:"contained",className:i.success},s.a.createElement("span",null,"Success!"));case"error":return s.a.createElement(o.a,{style:t?void 0:{display:"none"},variant:"contained",onClick:h,className:i.error},s.a.createElement("span",null,"Error. Retry?"));default:throw Error("This should not happen\u2122.")}}m.defaultProps={show:!0,onSuccess:function(){}},t.default=Object(l.withStyles)(function(e){return{ready:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{backgroundColor:e.palette.primary.dark}},sendingPending:{backgroundColor:e.palette.grey[300],color:e.palette.getContrastText(e.palette.grey[300]),"&:hover":{backgroundColor:e.palette.grey[500]}},error:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText,"&:hover":{backgroundColor:e.palette.error.dark}},success:{backgroundColor:e.palette.success.main,color:e.palette.success.contrastText,"&:hover":{backgroundColor:e.palette.success.dark}}}})(m)},256:function(e,t,a){"use strict";var r=a(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),s=(0,r(a(49)).default)(n.default.createElement(n.default.Fragment,null,n.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.default.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"})),"FileCopy");t.default=s},91:function(e,t,a){"use strict";a.r(t);var r=a(131),n=a(16),s=a(0),o=a.n(s),i=a(5995),c=a(27),l=a(101),d=a(9),u=a(5994),m=a(60),g=a(5779),p=a(264),h=a(5795),y=a.n(h),f=a(5796),b=a.n(f),v=a(5797),E=a.n(v),k=a(5798),C=a.n(k),w=a(242),j=a.n(w),A=a(256),O=a.n(A),I=a(21),x=a(240),N=a(247),S=a(72);function T(e){var t=e.ein,a=e.setCurrentClaim,r=Object(d.useWeb3Context)(),i=Object(I.useNamedContract)("1484"),c=Object(s.useState)(""),l=Object(n.a)(c,2),u=l[0],m=l[1],h=Object(s.useState)(void 0),f=Object(n.a)(h,2),v=f[0],k=f[1];Object(d.useAccountEffect)(function(){""!==u?Object(p.isValidChecksumAddress)(u)?i.methods.hasIdentity(u).call().then(function(e){k(e?"Address is already associated with an Identity.":null)}):k("Invalid address."):k(void 0)},[u]);var w=Object(s.useState)(0),j=Object(n.a)(w,2),A=j[0],O=j[1];var x=Object(s.useRef)(Math.round(new Date/1e3)-120),S=null!==v?null:r.web3js.utils.soliditySha3("0x19","0x00",i._address,"I authorize adding this address to my Identity.",t,u,x.current);return o.a.createElement(o.a.Fragment,null,o.a.createElement(g.y,{variant:"h4",gutterBottom:!0,color:"textPrimary"},"Link a new address to your EIN."),o.a.createElement(y.a,{activeStep:A,orientation:"vertical"},o.a.createElement(b.a,{key:0},o.a.createElement(E.a,null,0===A?"Address to Add":"Address to Add: ".concat(u)),o.a.createElement(C.a,null,"Enter the address you wish to claim under your current identity. You need to be able to transact from this address.",o.a.createElement(g.w,{key:"Address to Add",label:"Address to Add",helperText:v||"You will need to transact from this address.",error:!!v,required:!0,margin:"normal",value:u,onChange:function(e){return m(e.target.value)},fullWidth:!0}),o.a.createElement(g.a,{variant:"contained",disabled:""===u||null!==v,onClick:function(){O(A+1)}},"Next"))),o.a.createElement(b.a,{key:1},o.a.createElement(E.a,null,"Give Permission"),o.a.createElement(C.a,null,"The next step is for you to give us permission to link this address to your Identity. This requires your signature of a hashed permission string.",o.a.createElement("br",null),o.a.createElement(g.a,{variant:"contained",style:{marginRight:"15px"},onClick:function(){O(A-1)}},"Back"),o.a.createElement(N.default,{readyText:"Sign",message:S,onSuccess:function(e){a({targetAddress:u,targetIsApproving:0,signingAddress:r.account,signature:e,timestamp:x.current})}})))))}var P=Object(c.withStyles)(function(e){return{snackbar:{maxWidth:"45%"},warning:{backgroundColor:e.palette.error.main},rightIcon:{marginLeft:e.spacing.unit},white:{color:"white"}}})(function(e){var t,a,r,n,s,i,c,u,m,h,y=e.classes,f=e.location,b=e.claim,v=e.deleteCurrentClaim,E=e.setRedirect,k=Object(d.useWeb3Context)(),C=Object(I.useNamedContract)("1484"),w=Object(I.useEIN)(b.targetIsApproving?b.targetAddress:b.signingAddress);return w?k.account===b.targetAddress?o.a.createElement(o.a.Fragment,null,o.a.createElement(g.y,{gutterBottom:!0,color:"textPrimary"},"Finalize the link between this address (",o.a.createElement("a",{href:Object(l.getEtherscanLink)(k.networkId,"address",k.account),className:y.link,target:"_blank",rel:"noopener noreferrer"},k.account),") and your EIN (",w,")."),o.a.createElement(x.default,{readyText:"Finalize",method:function(){return C.methods.addAssociatedAddress(b.targetIsApproving?b.targetAddress:b.signingAddress,b.targetIsApproving?b.signingAddress:b.targetAddress,b.signature.v,b.signature.r,b.signature.s,b.timestamp)},onConfirmation:function(){E(!0),v(),k.reRenderers.forceAccountReRender()}})):o.a.createElement(o.a.Fragment,null,o.a.createElement(g.y,{gutterBottom:!0,color:"textPrimary"},"Claim detected! Please switch to"," ",o.a.createElement("a",{href:Object(l.getEtherscanLink)(k.networkId,"address",b.targetAddress),className:y.link,target:"_blank",rel:"noopener noreferrer"},b.targetAddress)," ","to finalize your claim."),o.a.createElement(g.y,{gutterBottom:!0,color:"textPrimary"},"If that account is only available on another devices, you may finalize the claim by visiting this URL:"),o.a.createElement(S.default,{key:"copy",placement:"top",value:(t=b,a=t.targetAddress,r=t.targetIsApproving,n=t.signingAddress,s=t.signature,i=t.timestamp,c=s.v,u=s.r,m=s.s,h=Object(p.toRpcSig)(c,u,m),[window.location.origin,"/snowflake-dashboard",f.pathname,"/".concat(a,"/").concat(Number(r),"/").concat(n,"/").concat(h,"/").concat(i)].join(""))},o.a.createElement(g.a,null,"Copy Link",o.a.createElement(O.a,{className:y.rightIcon}))),o.a.createElement(g.y,{gutterBottom:!0,color:"textPrimary"},"You may also delete this claim if you no longer wish to link your address:"),o.a.createElement(g.a,{onClick:v},"Delete Claim",o.a.createElement(j.a,{className:y.rightIcon}))):null});t.default=Object(i.a)(function(e){var t=e.ein,a=e.location,i=e.history,c=Object(d.useWeb3Context)(),l=Object(I.useSessionStorageState)(null,"SnowflakeClaim|".concat(c.networkId)),h=Object(n.a)(l,3),y=h[0],f=h[1],b=h[2],v=Object(s.useState)(!1),E=Object(n.a)(v,2),k=E[0],C=E[1];return Object(s.useEffect)(function(){if(a.state)try{if(!Object(p.isValidChecksumAddress)(a.state.targetAddress))throw Error("Invalid target address.");if(![0,1].includes(Number(a.state.targetIsApproving)))throw Error("Invalid targetIsApproving flag.");if(!Object(p.isValidChecksumAddress)(a.state.signingAddress))throw Error("Invalid signing address.");if(!Number.isInteger(Number(a.state.timestamp)))throw Error("Invalid timestamp.");var e=Math.round(Date.now()/1e3);if(Number(a.state.timestamp)<e-82080)throw Error("Timestamp too old.");if(Number(a.state.timestamp)>e)throw Error("Timestamp in the future.");f({targetAddress:a.state.targetAddress,targetIsApproving:!!Number(a.state.targetIsApproving),signingAddress:a.state.signingAddress,signature:Object(p.fromRpcSig)(a.state.signature),timestamp:Number(a.state.timestamp)})}catch(t){console.error("Error parsing arguments passed in the URL.",t)}finally{i.replace(Object(r.a)({},a,{state:void 0}))}},[]),k?o.a.createElement(u.a,{to:"/"}):o.a.createElement(o.a.Fragment,null,!t&&!y&&o.a.createElement(o.a.Fragment,null,o.a.createElement(g.y,{gutterBottom:!0,color:"textPrimary"},"If you are trying to link your current account to an existing identity, you need a signature! Visit your existing Provider to get one."),o.a.createElement(g.a,{component:m.a,to:"/"},"Creating a new Identity?")),t&&!y&&o.a.createElement(T,{ein:t,setCurrentClaim:f,deleteCurrentClaim:b}),y&&o.a.createElement(P,{claim:y,location:a,deleteCurrentClaim:b,setRedirect:C}))})}}]);
//# sourceMappingURL=29.18ba9450.chunk.js.map